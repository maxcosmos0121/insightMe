<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>é¦–é¡µ - InsightMe</title>
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <!-- é¢„åŠ è½½å…³é”®CSS -->
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" as="style"
          onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="{{ url_for('static', filename='css/common.css') }}" as="style"
          onload="this.onload=null;this.rel='stylesheet'">
    <!-- å¤‡ç”¨åŠ è½½ -->
    <noscript>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="{{ url_for('static', filename='css/common.css') }}" rel="stylesheet">
    </noscript>
    <style>
        .main-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2.5rem;
            align-items: stretch;
        }

        .left-section {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .right-section {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .welcome-box {
            background: linear-gradient(135deg, #f0f6ff 0%, #e9f0fb 100%);
            border-radius: 1rem;
            padding: 1.5rem;
            border: 1px solid #e5e7eb;
            height: 180px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .welcome-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 0.5rem;
        }

        .welcome-subtitle {
            font-size: 1rem;
            color: #64748b;
            font-weight: 500;
        }

        .stats-box {
            background: #f9fafb;
            border-radius: 1rem;
            padding: 1.2rem;
            border: 1px solid #e5e7eb;
            /* height: 200px; */
            display: flex;
            flex-direction: column;
        }

        .stats-title {
            font-size: 1.08rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 0.8rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.8rem;
        }

        .stat-item {
            text-align: center;
            padding: 0.85rem 0.5rem;
            background: white;
            border-radius: 0.75rem;
            border: 1px solid #f1f5f9;
        }

        .stat-number {
            font-size: 1.18rem;
            font-weight: 700;
            color: #2563eb;
            margin-bottom: 0.16rem;
        }

        .stat-label {
            font-size: 0.93rem;
            color: #64748b;
            font-weight: 500;
        }

        .actions-box {
            background: #f9fafb;
            border-radius: 1rem;
            padding: 1.2rem;
            border: 1px solid #e5e7eb;
            /* height: 200px; */
            display: flex;
            flex-direction: column;
        }

        .actions-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 1rem;
        }

        .actions-list {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        .action-link {
            display: flex;
            align-items: center;
            padding: 1rem;
            background: white;
            border-radius: 0.8rem;
            text-decoration: none;
            color: #1e293b;
            border: 1px solid #f1f5f9;
            font-weight: 500;
        }

        .action-link:hover {
            background: #f8fafc;
            color: #2563eb;
            text-decoration: none;
        }

        .action-icon {
            font-size: 1.3rem;
            margin-right: 0.8rem;
        }

        .notice-box {
            background: #fef3c7;
            border-left: 3px solid #f59e0b;
            padding: 1.2rem;
            border-radius: 0.8rem;
            color: #92400e;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .logout-small {
            margin-top: 1rem;
            text-align: left;
        }

        .mood-box {
            background: #f0fdf4;
            border-radius: 1rem;
            padding: 1.5rem;
            border: 1px solid #dcfce7;
            height: 180px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .mood-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 1rem;
        }

        .mood-content {
            font-size: 2rem;
            color: #059669;
            font-weight: 700;
            text-align: center;
            padding: 1rem;
            background: white;
            border-radius: 0.8rem;
            border: 1px solid #d1fae5;
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .finance-card-link {
            transition: box-shadow 0.25s, transform 0.25s;
        }
        .finance-card-link:hover {
            box-shadow: 0 8px 24px rgba(0,0,0,0.10);
            transform: translateY(-3px) scale(1.01);
            z-index: 1;
        }

        @media (max-width: 768px) {
            .main-layout {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
<div class="card-common">
    <div class="main-layout">
        <div class="left-section" style="display: flex; flex-direction: column; height: 100%;">
            <div class="welcome-box">
                <h1 class="welcome-title">æ¬¢è¿å›æ¥ï¼Œ{{ user.nickname or user.username }}</h1>
                <p class="welcome-subtitle">åšæŒè®°å½•ï¼Œå‘ç°æ›´å¥½çš„è‡ªå·±ã€‚æ¯ä¸€å¤©çš„æ„Ÿæ‚Ÿéƒ½æ˜¯æˆé•¿çš„è§è¯ã€‚</p>
                <div class="logout-small">
                    <a class="btn btn-outline-success btn-sm me-2" href="{{ url_for('main.profile') }}">ä¸ªäººèµ„æ–™</a>
                    <a class="btn btn-outline-danger btn-sm" href="{{ url_for('main.logout') }}">é€€å‡ºç™»å½•</a>
                </div>
            </div>

            <div class="stats-box" style="flex: 1; display: flex; flex-direction: column;">
                <h2 class="stats-title">ğŸ“Š æ•°æ®æ¦‚è§ˆ</h2>
                <div class="stats-grid" style="grid-template-columns: repeat(3, 1fr);">
                    <div class="stat-item">
                        <div class="stat-number">{{ user.diary_count or 0 }}</div>
                        <div class="stat-label">å·²å†™æ—¥è®°</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">{{ user.streak or 0 }}</div>
                        <div class="stat-label">è¿ç»­ç­¾åˆ°</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">{{ user.todo_stats.total or 0 }}</div>
                        <div class="stat-label">å¾…åšä»»åŠ¡</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">{{ user.todo_stats.completed or 0 }}</div>
                        <div class="stat-label">å·²å®Œæˆä»»åŠ¡</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">{{ user.checkin_stats.total_items or 0 }}</div>
                        <div class="stat-label">æ‰“å¡é¡¹ç›®</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">{{ user.checkin_stats.today_checked or 0 }}/{{ user.checkin_stats.total_records_today or 0 }}</div>
                        <div class="stat-label">ä»Šæ—¥æ‰“å¡</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">{{ user.inspiration_count or 0 }}</div>
                        <div class="stat-label">æ€»çµæ„Ÿæ•°</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">{{ user.todo_stats.plan_total or 0 }}</div>
                        <div class="stat-label">è®¡åˆ’æ¸…å•æ€»æ•°</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">{{ user.todo_stats.plan_completed or 0 }}</div>
                        <div class="stat-label">å·²å®Œæˆè®¡åˆ’</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">{{ user.network_count or 0 }}</div>
                        <div class="stat-label">äººè„‰ç½‘ç»œæ•°</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">{{ user.finance_count or 0 }}</div>
                        <div class="stat-label">ç†è´¢è®°å½•æ•°</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">{{ user.growth_count or 0 }}</div>
                        <div class="stat-label">æˆé•¿è®°å½•æ•°</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">{{ user.health_count or 0 }}</div>
                        <div class="stat-label">å¥åº·è®°å½•æ•°</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">{{ user.active_days_this_month or 0 }}</div>
                        <div class="stat-label">æœ¬æœˆæ´»è·ƒå¤©æ•°</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">{{ user.total_login_days or 0 }}</div>
                        <div class="stat-label">ç´¯è®¡ç™»å½•å¤©æ•°</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="right-section" style="display: flex; flex-direction: column; height: 100%;">
            <div style="display: flex; gap: 1.5rem;">
                <div class="mood-box" style="flex: 1;">
                    <h2 class="mood-title">ğŸ˜Š ä»Šæ—¥å¿ƒæƒ…</h2>
                    <div class="mood-content">{{ user.today_mood or 'æœªå¡«å†™' }}</div>
                </div>
                <div class="mood-box" style="flex: 1; background: #fffbe6; border: 1px solid #ffeeb8; display: flex; flex-direction: column; justify-content: space-between;">
                    <h2 class="mood-title">ğŸ’§ ä»Šæ—¥å–æ°´</h2>
                    <div class="mood-content" style="color: #b08900;">
                        {{ user.drink_water_count or 0 }} æ¬¡
                    </div>
                </div>
            </div>
            <div class="actions-box">
                <h2 class="actions-title">ğŸš€ å¿«é€Ÿæ“ä½œ</h2>
                <div class="actions-list">
                    <a class="action-link" href="{{ url_for('main.history') }}">
                        <span class="action-icon">ğŸ“</span>
                        æ¯æ—¥æ—¥è®°
                    </a>
                    <a class="action-link" href="{{ url_for('main.checkin') }}">
                        <span class="action-icon">âœ…</span>
                        æ—¥å¸¸æ‰“å¡
                    </a>
                    <a class="action-link" href="{{ url_for('main.history') }}">
                        <span class="action-icon">ğŸ’¡</span>
                        çµæ„Ÿä¸€ç°
                    </a>
                    <a class="action-link" href="{{ url_for('main.todos') }}">
                        <span class="action-icon">ğŸ—’ï¸</span>
                        è®¡åˆ’æ¸…å•
                    </a>
                    <a class="action-link" href="{{ url_for('main.todos') }}">
                        <span class="action-icon">ğŸŒ</span>
                        äººè„‰ç½‘ç»œ
                    </a>
                </div>
            </div>
            <div style="display: flex; gap: 1.5rem; flex: 1; min-height: 0;">
                <a href="{{ url_for('main.home') }}" class="finance-card-link" style="flex: 1; background: #e0f7fa; border-radius: 1rem; padding: 1.2rem; border: 1px solid #b2ebf2; display: flex; align-items: center; justify-content: center; height: 100%; text-decoration: none; color: inherit;">
                    <div style="font-size: 1.5rem; font-weight: bold;">ğŸ’°ç†è´¢</div>
                </a>
                <a href="{{ url_for('main.home') }}" class="finance-card-link" style="flex: 1; background: #e8f5e9; border-radius: 1rem; padding: 1.2rem; border: 1px solid #c8e6c9; display: flex; align-items: center; justify-content: center; height: 100%; text-decoration: none; color: inherit;">
                    <div style="font-size: 1.5rem; font-weight: bold;">ğŸ“ˆæˆé•¿</div>
                </a>
                <a href="{{ url_for('main.home') }}" class="finance-card-link" style="flex: 1; background: #fff3e0; border-radius: 1rem; padding: 1.2rem; border: 1px solid #ffe0b2; display: flex; align-items: center; justify-content: center; height: 100%; text-decoration: none; color: inherit;">
                    <div style="font-size: 1.5rem; font-weight: bold;">ğŸ’ªå¥åº·</div>
                </a>
            </div>
        </div>


    </div>
</div>

<!-- jQuery 3.7.1 -->
<script src="{{ url_for('static', filename='js/jquery-3.7.1.min.js') }}"></script>
<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- é€šç”¨JavaScript -->
<script src="{{ url_for('static', filename='js/common.js') }}"></script>

<script>
    $(document).ready(function () {
        // ç‚¹å‡»ç»Ÿè®¡å¡ç‰‡æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
        $('.stat-item').on('click', function () {
            var number = $(this).find('.stat-number').text();
            var label = $(this).find('.stat-label').text();
            showMessage('æ‚¨æœ‰ ' + number + ' ä¸ª' + label, 'info', 3000);
        });

        // é€€å‡ºç™»å½•ç¡®è®¤
        $('.btn-outline-danger').on('click', function (e) {
            if (!confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                e.preventDefault();
                return false;
            }
        });
    });
</script>
</body>
</html>

